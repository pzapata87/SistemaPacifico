@model IEnumerable<SistemaPacifico.Models.PropuestaSolucionViewModel>

@{
    ViewBag.Title = "Index";
}

@using (Html.BeginForm("Index", "PropuestaSolucion", FormMethod.Post))
{
    @*<div id="labelSuccess" class="alert alert-success">
        <button type="button" class="close" data-dismiss="alert">×</button>
        <strong>Aviso:</strong> Propuesta de solución registrada.
    </div>*@
    <hr />
    <table width="85%" class="fondo" align="center">
        <tr>
            <td>N° Propuesta: </td>
            <td><input type="text" class="form-control :digits" name="numeroPropuesta" value="@ViewBag.ParamCodigo" style="display: inline-block;" /></td>
            <td>&nbsp;</td>
            <td>Fecha Registro: </td>
            <td><input id="fechaBusqueda" type="text" class="form-control" name="fecha" value="@ViewBag.ParamFecha" /></td>
        </tr>
        <tr>
            <td>DNI Prospecto: </td>
            <td><input type="text" class="form-control :digits" name="dni" value="@ViewBag.ParamDni" maxlength="8" style="display: inline-block;" /></td>
            <td>&nbsp;</td>
            <td>Nombre Prospecto: </td>
            <td><input type="text" class="form-control" name="nombre" value="@ViewBag.ParamNombre" /></td>
            <td colspan="3" align="right"><button type="submit" class="btn btn-primary">Buscar</button></td>
        </tr>
        <tr>
            <td>  </td>
        </tr>
    </table>

    <table class="table table-striped">
        <tr>
            <th>
                N° Propuesta
            </th>
            <th>
                DNI
            </th>
            <th>
                Nombre
            </th>
            <th>
                Fec. Nacimiento
            </th>
            <th>
                Fec. Registro
            </th>
            <th>
                Mnt. Asegurado
            </th>
            <th>
                Mnt. Prima
            </th>
            <th>
                Mnt. Retorno
            </th>
            <th></th>
        </tr>

        @if (Model.Any())
        {
            foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Codigo)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.DNIProspecto)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.NombreProspecto)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FechaNacimiento)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.FechaRegistro)
                    </td>
                    <td>
                        @string.Format("{0:n}", item.MontoAsegurado)
                    </td>
                    <td>
                        @string.Format("{0:n}", item.MontoPrima)
                    </td>
                    <td>
                        @string.Format("{0:n}", item.MontoRetorno)
                    </td>
                    <td>
                        @Html.ActionLink("Ver Propuesta", "EditarPropuesta", new {id = item.Codigo})
                    </td>
                </tr>
            }
        }
        else
        {
            <tr>
                <td colspan="8">
                    <div id="labelError" class="alert alert-danger">
                        No se encontraron propuestas relacionadas
                    </div>
                </td>
            </tr>
        }
    </table>
    <p>
        <a href="@Url.Action("CrearPropuesta", "PropuestaSolucion")" class="btn btn-primary">Nuevo</a>
    </p>
}

@section Scripts {
    <script src="@Url.Content("~/Scripts/datepicker-es.js")" type="text/javascript"></script>
}

<script type="text/javascript">
    $(document).ready(function () {
        $('#fechaBusqueda').datepicker({
            changeMonth: true,
            changeYear: true,
            option: $.datepicker.regional['es'],
            yearRange: "1930:+0"
        });
    });
</script>